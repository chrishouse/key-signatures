var oldKey,showAKeyBtn=document.querySelector(".button-show-a-key"),keyBox=document.querySelector(".key-box"),keyRoot=document.querySelector("#key-root"),selectKey2=document.querySelector("#key-2"),selectKey3=document.querySelector("#key-3"),selectKey4=document.querySelector("#key-4"),selectKey5=document.querySelector("#key-5"),selectKey6=document.querySelector("#key-6"),selectKey7=document.querySelector("#key-7"),selectKeyOctave=document.querySelector("#key-octave"),checkAnswersBtn=document.querySelector(".check-answers"),checkboxes=document.querySelectorAll(".key-select input[type=checkbox]"),keyArray=[],correctArray=[],userArray=[],results=document.querySelector(".results"),checkAll=document.querySelector(".check-all"),uncheckAll=document.querySelector(".uncheck-all"),showAnswersBtn=document.querySelector(".show-answers");function showAKey(){oldKey=keyRoot.innerHTML,keyArray=[];for(var e=document.querySelectorAll(".key-select input[type=checkbox]:checked"),r=0;r<e.length;r++)keyArray.push(e[r].value);if(0!=keyArray.length){for(var c=Math.floor(Math.random()*Math.floor(keyArray.length)),t=0;keyArray[c]==oldKey;){c=Math.floor(Math.random()*Math.floor(keyArray.length));if(10<++t)return keyRoot.innerHTML=keyArray[c],results.innerHTML="",selectKey2.value="",selectKey3.value="",selectKey4.value="",selectKey5.value="",selectKey6.value="",selectKey7.value="",void(selectKeyOctave.value="")}keyRoot.innerHTML=keyArray[c],keyBox.classList.add("visible"),checkAnswersBtn.classList.add("visible"),showAnswersBtn.classList.remove("visible"),results.innerHTML="",selectKey2.value="",selectKey3.value="",selectKey4.value="",selectKey5.value="",selectKey6.value="",selectKey7.value="",selectKeyOctave.value=""}else alert("Please select at least one key.")}function checkAnswers(){switch((userArray=[]).push(keyRoot.innerHTML,selectKey2.value,selectKey3.value,selectKey4.value,selectKey5.value,selectKey6.value,selectKey7.value,selectKeyOctave.value),keyRoot.innerHTML){case"C":correctArray=["C","D","E","F","G","A","B","C"];break;case"G":correctArray=["G","A","B","C","D","E","F#","G"];break;case"D":correctArray=["D","E","F#","G","A","B","C#","D"];break;case"A":correctArray=["A","B","C#","D","E","F#","G#","A"];break;case"E":correctArray=["E","F#","G#","A","B","C#","D#","E"];break;case"B":correctArray=["B","C#","D#","E","F#","G#","A#","B"];break;case"F#":correctArray=["F#","G#","A#","B","C#","D#","E#","F#"];break;case"C#":correctArray=["C#","D#","E#","F#","G#","A#","B#","C#"];break;case"F":correctArray=["F","G","A","Bb","C","D","E","F"];break;case"Bb":correctArray=["Bb","C","D","Eb","F","G","A","Bb"];break;case"Eb":correctArray=["Eb","F","G","Ab","Bb","C","D","Eb"];break;case"Ab":correctArray=["Ab","Bb","C","Db","Eb","F","G","Ab"];break;case"Db":correctArray=["Db","Eb","F","Gb","Ab","Bb","C","Db"];break;case"Gb":correctArray=["Gb","Ab","Bb","Cb","Db","Eb","F","Gb"];break;case"Cb":correctArray=["Cb","Db","Eb","Fb","Gb","Ab","Bb","Cb"]}for(var e=0;userArray.length>e;e++)if(userArray[e]!==correctArray[e])return results.innerHTML="<span class='wrong'>Sorry, that's not quite right. Try again!</span>",showAnswersBtn.classList.add("visible"),!1;results.innerHTML="<span class='right'>Correct! Great job!</span>",showAnswersBtn.classList.remove("visible")}function showAnswers(){selectKey2.value=correctArray[1],selectKey3.value=correctArray[2],selectKey4.value=correctArray[3],selectKey5.value=correctArray[4],selectKey6.value=correctArray[5],selectKey7.value=correctArray[6],selectKeyOctave.value=correctArray[7],checkAnswersBtn.classList.remove("visible"),results.innerHTML="",showAnswersBtn.classList.remove("visible")}showAKeyBtn.addEventListener("click",showAKey),window.addEventListener("load",showAKey),checkAnswersBtn.addEventListener("click",checkAnswers),checkAll.addEventListener("click",function(){Array.prototype.forEach.call(checkboxes,function(e){e.checked=!0})}),uncheckAll.addEventListener("click",function(){Array.prototype.forEach.call(checkboxes,function(e){e.checked=!1})}),showAnswersBtn.addEventListener("click",showAnswers);